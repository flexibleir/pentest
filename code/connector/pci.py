import sys
import requests
import json

def Run(login):
    # nm = nmap.PortScanner()
    # target = input("Enter target host ip or name:")
    # nm.scan(target, '22-5000')
    # status = nm.scanstats()

    # if status['uphosts'] == '1':
    #     print(json.dumps(nm[target], indent=4))
    # else:
    #     print("Error")
    login.print()
    response = Trigger(login)
    return response
    print("Done PCI")
    return "done PCI"


def Trigger(login):
    url = "http://pci:8080"
    headers = {'Content-Type': 'application/json'}
    data = "{\"hostname\": \""+ login.hostName +"\",\"id\": \"30\",\"username\":\"akshay\",\"password\":\"akshay\",\"compliancetype\":\"PcI\"}"

    response = requests.post(url,data=data,headers=headers)
    print(response.status_code)
    print(response.text)
    url = "http://pci:8080/30"
    response = requests.get(url,data=data,headers=headers)
    values = json.dumps(response.json())
    print(values)
    return values    