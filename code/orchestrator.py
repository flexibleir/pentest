import connector.pen
import connector.pci
import connector.cis
import common.login as login
import gen.trigger.init
import uuid
import os


def CreateDirectory(directory):
    if not os.path.exists(directory):
        os.makedirs(directory)

def WriteToFile(id,fileName,content):
    folderName = "/data"
#     CreateDirectory(folderName)
    f= open(folderName+"/"+fileName+".json","w+")
    f.write(content)
    f.close()
    # print(content)

def TriggerScan(target,userName,password):
    loginVar = login.login(target,userName,password)
    id = str(uuid.uuid1())
    penContent = connector.pen.Run(loginVar)
    WriteToFile(id,"pen",penContent)
    pciContent = connector.pci.Run(loginVar)
    WriteToFile(id,"pci",pciContent)
    connector.cis.Run(loginVar)

if __name__ == "__main__":
    # target = input("Enter target host ip or name:")
    # userName = input("Enter username of host:")
    # password = input("Enter target of host:")
    gen.trigger.init.create_app().run(host="0.0.0.0")
    # TriggerScan(target,userName,password)
